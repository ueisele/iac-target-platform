= Vagrant-Platform

This repository provides a Vagrant configuration that sets up a HA development platform.

== Prerequisites

. Install Git, Vagrant and VirtualBox

. Install the Vagrant Landrush plugin to enable hostname resolution within the platform

    vagrant plugin install landrush

. Clone repository

    git clone https://github.com/ueisele/iac-vagrant-platfrom.git
    cd iac-vagrant-platform

. Optional: link:doc/hostname-resolution-from-host.adoc[Enable hostname resolution from host]

== Quick Start

. Start and Provision the Cluster

    ./up.sh

. Optional: Activate platform hostname resolution from host

    ./dns-enable.sh

. Access the Consul UI (with activated hostname resolution from host)

    http://consul-http.public.platform.dev/

. Access the Consul UI (with disabled hostname resolution from host)

    http://192.168.17.20:85000

. Optional: Disable platform hostname resolution from host

    ./dns-disable.sh

. Finally, destroy the Cluster

    ./destroy.sh

== Run Ansible Playbooks and Ad Hoc Commands

The provided inventory at './.vagrant/provisioners/ansible/inventory' can be used to run Ansible playbooks and ad hoc commands at the guest nodes.
The inventory is auto generated by Vagrant if the command `vagrant up` or `vagrant provision` is called.

[source,bash]
----
ansible all -i .vagrant/provisioners/ansible/inventory -m command -a 'ls -alh'
----

== Platform Documentation

* link:doc/hostname-resolution-from-host.adoc[Enable hostname resolution from host]

== Prospect

* Add Infrastructure
- Confluent Platform (Apache Kafka, Connect, Schema Registry, Rest Proxy)
- Apache Mesos with Frameworks (Marathon, Chronos, Spark, ...)
* Automatically register services, running in Apache Mesos at Traefik 
* Monitoring (Grafana, Prometheus, ...)